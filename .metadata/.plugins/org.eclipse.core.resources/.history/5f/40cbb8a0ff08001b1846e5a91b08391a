<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>급여 관리 시스템</title>
<!--  
규칙 : 기본급여  : (정수값)
       기타수당  : 국가유공자 + 5년이상 근속
       총액      : (기본급 + 자격증 수당 + 자녀 수당 + 기타 수당)
       세금      : 기본급 * 0.22 
       실수령액  : 총액 - 세금
       연봉      : 총액 * 12 + 기본급
       천단위 콤마 처리 : 자율 (표현식 , 로직)
       10,000,000원 
-->
	<script type="text/javascript">
		function resultSal(frm) {
			const name = document.getElementsByName('name')[0];
			const basicPay = document.getElementsByName('basicPay')[0];
			const licenseRadios = document.getElementsByName('license');
			const childRadios = document.getElementsByName('child');

			// 계산하기 click event
			document.getElementsByName('btn')[0].addEventListener('click', e =>{
			    const resultName = name.value;
			    const resultBasicPay = Number(basicPay.value);
			    const resultLicense = getCheckedValue(licenseRadios);
			    const resultChild = getCheckedValue(childRadios);
			    const resultEtc = sumEtcPay();
			    const resultTotalPay = resultBasicPay + resultLicense + resultChild + resultEtc;
			    const resultTax = resultBasicPay * 0.22;
			    const resultPay = resultTotalPay - resultTax;
			    const resultYearlyPay = resultTotalPay * 12 + resultBasicPay;

			    inputValues({
			        resultName,
			        resultBasicPay,
			        resultLicense,
			        resultChild,
			        resultEtc,
			        resultTotalPay,
			        resultTax,
			        resultPay,
			        resultYearlyPay
			    });
			})

			toggleRadio(licenseRadios);
			toggleRadio(childRadios);

			// radio에서 checked된 값을 반환
			function getCheckedValue(radioElements){
			    let pay = 0;
			    for(let i = 0; i < radioElements.length; i++){
			        if(radioElements[i].checked){
			            pay = Number(radioElements[i].value);
			            break;
			        }
			    }
			    return pay;
			}

			// 기타 수당 합 반환
			function sumEtcPay(){
			    const merit = document.getElementsByName('merit')[0];
			    const longterm = document.getElementsByName('longterm')[0];
			    return Number(merit.checked ? merit.value : 0) + Number(longterm.checked ? longterm.value : 0);
			}

			// input에 계산한값 넣는 함수
			function inputValues(values){
			    document.getElementsByName('resultName')[0].value = values.resultName;
			    document.getElementsByName('resultBasicPay')[0].value = `${values.resultBasicPay.toLocaleString()}원`;
			    document.getElementsByName('resultLicense')[0].value = `${values.resultLicense.toLocaleString()}원`;
			    document.getElementsByName('resultChild')[0].value = `${values.resultChild.toLocaleString()}원`;
			    document.getElementsByName('resultEtc')[0].value = `${values.resultEtc.toLocaleString()}원`;
			    document.getElementsByName('resultTotalPay')[0].value = `${values.resultTotalPay.toLocaleString()}원`;
			    document.getElementsByName('resultTax')[0].value = `${values.resultTax.toLocaleString()}원`;
			    document.getElementsByName('resultPay')[0].value = `${values.resultPay.toLocaleString()}원`;
			    document.getElementsByName('resultYearlyPay')[0].value = `${values.resultYearlyPay.toLocaleString()}원`;
			}

			// 체크된 radio 클릭 시 체크해제하는 event 부여
			function toggleRadio(radioArr){
			    let checkedRadio;
			    radioArr.forEach(el => {
			        el.addEventListener('click', ev => {
			            if(checkedRadio === el){
			                el.checked = false;
			                checkedRadio = undefined;
			            } else {
			                checkedRadio = el;
			            }
			        })
			    })
			}
	
	</script>
</head>
<body>
	<h2>급여 관리 시스템</h2>
	<form name="payManage">
		<table>
			<tr>
				<td>성명:</td>
				<td><input type="text" name="name" size="20"></td>
			</tr>
			<tr>
				<td>기본급:</td>
				<td><input type="text" name="basicPay" size="20"></td>
			</tr>
			<tr>
				<td>자격증 수당:</td>
				<td><input type="radio" name="license" value="150000">기사 150,000원
					<input type="radio" name="license" value="100000">산업기사 100,000원
					<input type="radio" name="license" value="50000">기능사 50,000원
				</td>
			</tr>
			<tr>
				<td>자녀 수당:</td>
				<td><input type="radio" name="child" value="100000">1인 100,000원
					<input type="radio" name="child" value="200000">2인 200,000원
					<input type="radio" name="child" value="300000">3인 300,000원
				</td>
			</tr>
			<tr>
				<td>기타 수당:</td>
				<td><input type="checkbox" name="merit" value=100000>국가유공자 100,000원
					<input type="checkbox" name="longterm" value=100000>5년이상 근속 100,000원
				</td>
			</tr>
			<tr>
				<td colspan="2"><input type="button" name="btn" value="계산하기"
					onclick="resultSal(this.form)" style="margin-left: 30px"></td>
			</tr>
		</table>
	</form>
	<p></p>
	<form name="resultForm">
		<table align="left" style="margin-left: 0px">
			<tr>
				<th colspan=2>출력 결과</th>
			</tr>
			<tr>
				<td width="100px">성명:</td>
				<td><input type=text name=resultName></td>
			<tr>
				<td>기본급:</td>
				<td><input type=text name=resultBasicPay></td>
			<tr>
				<td>자격증 수당:</td>
				<td><input type=text name=resultLicense></td>
			<tr>
				<td>자녀 수당:</td>
				<td><input type=text name=resultChild></td>
			<tr>
				<td>기타 수당:</td>
				<td><input type=text name=resultEtc></td>
			<tr>
				<td>총액:</td>
				<td><input type=text name=resultTotalPay></td>
			<tr>
				<td>세금:</td>
				<td><input type=text name=resultTax></td>
			<tr>
				<td>실수령액:</td>
				<td><input type=text name=resultPay></td>
			<tr>
				<td>연봉:</td>
				<td><input type=text name=resultYearlyPay></td>
			</tr>
		</table>
	</form>
</body>
</html>